var Ue=Object.defineProperty;var Je=(r,e,t)=>e in r?Ue(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var be=(r,e,t)=>Je(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function he(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Fe(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var i=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return r[s]}})}),t}var ee,_e;function We(){if(_e)return ee;_e=1;const r=e=>{const t=new Set;do for(const s of Reflect.ownKeys(e))t.add([e,s]);while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t};return ee=(e,{include:t,exclude:s}={})=>{const i=a=>{const l=o=>typeof o=="string"?a===o:o.test(a);return t?t.some(l):s?!s.some(l):!0};for(const[a,l]of r(e.constructor.prototype)){if(l==="constructor"||!i(l))continue;const o=Reflect.getOwnPropertyDescriptor(a,l);o&&typeof o.value=="function"&&(e[l]=e[l].bind(e))}return e},ee}var Ye=We();const de=he(Ye);var z={exports:{}},Xe=z.exports,xe;function Me(){return xe||(xe=1,function(r){(function(e,t,s){function i(n){var h=this,d=o();h.next=function(){var u=2091639*h.s0+h.c*23283064365386963e-26;return h.s0=h.s1,h.s1=h.s2,h.s2=u-(h.c=u|0)},h.c=1,h.s0=d(" "),h.s1=d(" "),h.s2=d(" "),h.s0-=d(n),h.s0<0&&(h.s0+=1),h.s1-=d(n),h.s1<0&&(h.s1+=1),h.s2-=d(n),h.s2<0&&(h.s2+=1),d=null}function a(n,h){return h.c=n.c,h.s0=n.s0,h.s1=n.s1,h.s2=n.s2,h}function l(n,h){var d=new i(n),u=h&&h.state,c=d.next;return c.int32=function(){return d.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,u&&(typeof u=="object"&&a(u,d),c.state=function(){return a(d,{})}),c}function o(){var n=4022871197,h=function(d){d=String(d);for(var u=0;u<d.length;u++){n+=d.charCodeAt(u);var c=.02519603282416938*n;n=c>>>0,c-=n,c*=n,n=c>>>0,c-=n,n+=c*4294967296}return(n>>>0)*23283064365386963e-26};return h}t&&t.exports?t.exports=l:this.alea=l})(Xe,r)}(z)),z.exports}var G={exports:{}},He=G.exports,ke;function Qe(){return ke||(ke=1,function(r){(function(e,t,s){function i(o){var n=this,h="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var u=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^u^u>>>8},o===(o|0)?n.x=o:h+=o;for(var d=0;d<h.length+64;d++)n.x^=h.charCodeAt(d)|0,n.next()}function a(o,n){return n.x=o.x,n.y=o.y,n.z=o.z,n.w=o.w,n}function l(o,n){var h=new i(o),d=n&&n.state,u=function(){return(h.next()>>>0)/4294967296};return u.double=function(){do var c=h.next()>>>11,p=(h.next()>>>0)/4294967296,f=(c+p)/(1<<21);while(f===0);return f},u.int32=h.next,u.quick=u,d&&(typeof d=="object"&&a(d,h),u.state=function(){return a(h,{})}),u}t&&t.exports?t.exports=l:this.xor128=l})(He,r)}(G)),G.exports}var K={exports:{}},Ze=K.exports,Ee;function et(){return Ee||(Ee=1,function(r){(function(e,t,s){function i(o){var n=this,h="";n.next=function(){var u=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(u^u<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,o===(o|0)?n.x=o:h+=o;for(var d=0;d<h.length+64;d++)n.x^=h.charCodeAt(d)|0,d==h.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function a(o,n){return n.x=o.x,n.y=o.y,n.z=o.z,n.w=o.w,n.v=o.v,n.d=o.d,n}function l(o,n){var h=new i(o),d=n&&n.state,u=function(){return(h.next()>>>0)/4294967296};return u.double=function(){do var c=h.next()>>>11,p=(h.next()>>>0)/4294967296,f=(c+p)/(1<<21);while(f===0);return f},u.int32=h.next,u.quick=u,d&&(typeof d=="object"&&a(d,h),u.state=function(){return a(h,{})}),u}t&&t.exports?t.exports=l:this.xorwow=l})(Ze,r)}(K)),K.exports}var $={exports:{}},tt=$.exports,je;function st(){return je||(je=1,function(r){(function(e,t,s){function i(o){var n=this;n.next=function(){var d=n.x,u=n.i,c,p;return c=d[u],c^=c>>>7,p=c^c<<24,c=d[u+1&7],p^=c^c>>>10,c=d[u+3&7],p^=c^c>>>3,c=d[u+4&7],p^=c^c<<7,c=d[u+7&7],c=c^c<<13,p^=c^c<<9,d[u]=p,n.i=u+1&7,p};function h(d,u){var c,p=[];if(u===(u|0))p[0]=u;else for(u=""+u,c=0;c<u.length;++c)p[c&7]=p[c&7]<<15^u.charCodeAt(c)+p[c+1&7]<<13;for(;p.length<8;)p.push(0);for(c=0;c<8&&p[c]===0;++c);for(c==8?p[7]=-1:p[c],d.x=p,d.i=0,c=256;c>0;--c)d.next()}h(n,o)}function a(o,n){return n.x=o.x.slice(),n.i=o.i,n}function l(o,n){o==null&&(o=+new Date);var h=new i(o),d=n&&n.state,u=function(){return(h.next()>>>0)/4294967296};return u.double=function(){do var c=h.next()>>>11,p=(h.next()>>>0)/4294967296,f=(c+p)/(1<<21);while(f===0);return f},u.int32=h.next,u.quick=u,d&&(d.x&&a(d,h),u.state=function(){return a(h,{})}),u}t&&t.exports?t.exports=l:this.xorshift7=l})(tt,r)}($)),$.exports}var U={exports:{}},it=U.exports,Pe;function nt(){return Pe||(Pe=1,function(r){(function(e,t,s){function i(o){var n=this;n.next=function(){var d=n.w,u=n.X,c=n.i,p,f;return n.w=d=d+1640531527|0,f=u[c+34&127],p=u[c=c+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,f=u[c]=f^p,n.i=c,f+(d^d>>>16)|0};function h(d,u){var c,p,f,g,v,b=[],j=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,j=Math.max(j,u.length)),f=0,g=-32;g<j;++g)u&&(p^=u.charCodeAt((g+32)%u.length)),g===0&&(v=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(v=v+1640531527|0,c=b[g&127]^=p+v,f=c==0?f+1:0);for(f>=128&&(b[(u&&u.length||0)&127]=-1),f=127,g=4*128;g>0;--g)p=b[f+34&127],c=b[f=f+1&127],p^=p<<13,c^=c<<17,p^=p>>>15,c^=c>>>12,b[f]=p^c;d.w=v,d.X=b,d.i=f}h(n,o)}function a(o,n){return n.i=o.i,n.w=o.w,n.X=o.X.slice(),n}function l(o,n){o==null&&(o=+new Date);var h=new i(o),d=n&&n.state,u=function(){return(h.next()>>>0)/4294967296};return u.double=function(){do var c=h.next()>>>11,p=(h.next()>>>0)/4294967296,f=(c+p)/(1<<21);while(f===0);return f},u.int32=h.next,u.quick=u,d&&(d.X&&a(d,h),u.state=function(){return a(h,{})}),u}t&&t.exports?t.exports=l:this.xor4096=l})(it,r)}(U)),U.exports}var J={exports:{}},rt=J.exports,Se;function ot(){return Se||(Se=1,function(r){(function(e,t,s){function i(o){var n=this,h="";n.next=function(){var u=n.b,c=n.c,p=n.d,f=n.a;return u=u<<25^u>>>7^c,c=c-p|0,p=p<<24^p>>>8^f,f=f-u|0,n.b=u=u<<20^u>>>12^c,n.c=c=c-p|0,n.d=p<<16^c>>>16^f,n.a=f-u|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,o===Math.floor(o)?(n.a=o/4294967296|0,n.b=o|0):h+=o;for(var d=0;d<h.length+20;d++)n.b^=h.charCodeAt(d)|0,n.next()}function a(o,n){return n.a=o.a,n.b=o.b,n.c=o.c,n.d=o.d,n}function l(o,n){var h=new i(o),d=n&&n.state,u=function(){return(h.next()>>>0)/4294967296};return u.double=function(){do var c=h.next()>>>11,p=(h.next()>>>0)/4294967296,f=(c+p)/(1<<21);while(f===0);return f},u.int32=h.next,u.quick=u,d&&(typeof d=="object"&&a(d,h),u.state=function(){return a(h,{})}),u}t&&t.exports?t.exports=l:this.tychei=l})(rt,r)}(J)),J.exports}var F={exports:{}};const at={},lt=Object.freeze(Object.defineProperty({__proto__:null,default:at},Symbol.toStringTag,{value:"Module"})),ut=Fe(lt);var ct=F.exports,Ae;function ht(){return Ae||(Ae=1,function(r){(function(e,t,s){var i=256,a=6,l=52,o="random",n=s.pow(i,a),h=s.pow(2,l),d=h*2,u=i-1,c;function p(y,w,P){var x=[];w=w==!0?{entropy:!0}:w||{};var _=b(v(w.entropy?[y,S(t)]:y??j(),3),x),A=new f(x),L=function(){for(var I=A.g(a),C=n,O=0;I<h;)I=(I+O)*i,C*=i,O=A.g(1);for(;I>=d;)I/=2,C/=2,O>>>=1;return(I+O)/C};return L.int32=function(){return A.g(4)|0},L.quick=function(){return A.g(4)/4294967296},L.double=L,b(S(A.S),t),(w.pass||P||function(I,C,O,R){return R&&(R.S&&g(R,A),I.state=function(){return g(A,{})}),O?(s[o]=I,C):I})(L,_,"global"in w?w.global:this==s,w.state)}function f(y){var w,P=y.length,x=this,_=0,A=x.i=x.j=0,L=x.S=[];for(P||(y=[P++]);_<i;)L[_]=_++;for(_=0;_<i;_++)L[_]=L[A=u&A+y[_%P]+(w=L[_])],L[A]=w;(x.g=function(I){for(var C,O=0,R=x.i,V=x.j,D=x.S;I--;)C=D[R=u&R+1],O=O*i+D[u&(D[R]=D[V=u&V+C])+(D[V]=C)];return x.i=R,x.j=V,O})(i)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function v(y,w){var P=[],x=typeof y,_;if(w&&x=="object")for(_ in y)try{P.push(v(y[_],w-1))}catch{}return P.length?P:x=="string"?y:y+"\0"}function b(y,w){for(var P=y+"",x,_=0;_<P.length;)w[u&_]=u&(x^=w[u&_]*19)+P.charCodeAt(_++);return S(w)}function j(){try{var y;return c&&(y=c.randomBytes)?y=y(i):(y=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(y)),S(y)}catch{var w=e.navigator,P=w&&w.plugins;return[+new Date,e,P,e.screen,S(t)]}}function S(y){return String.fromCharCode.apply(0,y)}if(b(s.random(),t),r.exports){r.exports=p;try{c=ut}catch{}}else s["seed"+o]=p})(typeof self<"u"?self:ct,[],Math)}(F)),F.exports}var te,Ie;function dt(){if(Ie)return te;Ie=1;var r=Me(),e=Qe(),t=et(),s=st(),i=nt(),a=ot(),l=ht();return l.alea=r,l.xor128=e,l.xorwow=t,l.xorshift7=s,l.xor4096=i,l.tychei=a,te=l,te}var se,Le;function pt(){if(Le)return se;Le=1;var r=dt(),e=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function t(s){const i=s!=null&&s.seed?new r(s.seed):null;function a(){return s&&s.maxLength>1?l():o()}function l(){for(var f=!1,g;!f;)g=o(),g.length<=s.maxLength&&(f=!0);return g}function o(){return e[n(e.length)]}function n(f){const g=i?i():Math.random();return Math.floor(g*f)}if(typeof s>"u")return a();typeof s=="number"&&(s={exactly:s}),s.exactly&&(s.min=s.exactly,s.max=s.exactly),typeof s.wordsPerString!="number"&&(s.wordsPerString=1),typeof s.formatter!="function"&&(s.formatter=f=>f),typeof s.separator!="string"&&(s.separator=" ");for(var h=s.min+n(s.max+1-s.min),d=[],u="",c=0,p=0;p<h*s.wordsPerString;p++)c===s.wordsPerString-1?u+=s.formatter(a(),c):u+=s.formatter(a(),c)+s.separator,c++,(p+1)%s.wordsPerString===0&&(d.push(u),u="",c=0);return typeof s.join=="string"&&(d=d.join(s.join)),d}return se=t,t.wordList=e,se}var ft=pt();const mt=he(ft);var gt=Me();const yt=he(gt);var wt="8.2.1";class X{constructor(e,t){this.dependencies=e,this.extensionsConfiguration=t,this.extensions=Object.fromEntries(t.map(s=>[X.getExtensionNameByClass(s.type),this.dependencies.instantiateExtension(s.type)]))}static getExtensionNameByClass(e){return e.info.name}getExtensionInstanceByClass(e){return this.extensions[X.getExtensionNameByClass(e)]}async initializeExtensions(){await Promise.all(this.extensionsConfiguration.map(({type:e,params:t={}})=>{this.getExtensionInstanceByClass(e).initialize(t);const s=e.info;!("version"in s)&&!("data"in s)?console.warn(s.name,"is missing the 'version' and 'data' fields. Please update extension as 'version' and 'data' will be required in v9. See https://www.jspsych.org/latest/developers/extension-development/ for more details."):"version"in s?"data"in s||console.warn(s.name,"is missing the 'data' field. Please update extension as 'data' will be required in v9. See https://www.jspsych.org/latest/developers/extension-development/ for more details."):console.warn(s.name,"is missing the 'version' field. Please update extension as 'version' will be required in v9. See https://www.jspsych.org/latest/developers/extension-development/ for more details.")}))}onStart(e=[]){var t;for(const{type:s,params:i}of e)(t=this.getExtensionInstanceByClass(s))==null||t.on_start(i)}onLoad(e=[]){var t;for(const{type:s,params:i}of e)(t=this.getExtensionInstanceByClass(s))==null||t.on_load(i)}async onFinish(e=[]){const t=await Promise.all(e.map(({type:i,params:a})=>{var l;return Promise.resolve((l=this.getExtensionInstanceByClass(i))==null?void 0:l.on_finish(a))})),s=e.length?{extension_type:e.map(({type:i})=>i.info.name),extension_version:e.map(({type:i})=>i.info.version)}:{};return t.unshift(s),Object.assign({},...t)}}function W(r){return[...new Set(r)]}function T(r){if(!r)return r;let e;if(Array.isArray(r)){e=[];for(const t of r)e.push(T(t));return e}else if(typeof r=="object"&&r!==null){e={};for(const t in r)r.hasOwnProperty(t)&&(e[t]=T(r[t]));return e}else return r}function H(r,e){let t={};for(const s in r)r.hasOwnProperty(s)&&(typeof r[s]=="object"&&e.hasOwnProperty(s)?t[s]=H(r[s],e[s]):t[s]=r[s]);for(const s in e)e.hasOwnProperty(s)&&(t.hasOwnProperty(s)&&typeof e[s]=="object"?t[s]=H(t[s],e[s]):t[s]=e[s]);return t}var vt=Object.freeze({__proto__:null,deepCopy:T,deepMerge:H,unique:W});class pe{constructor(e=[]){this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){let e=0,t=0;for(const s of this.values)typeof s<"u"&&s!==null&&(e+=s,t++);if(t!==0)return e/t}median(){if(this.values.length===0)return;const e=this.values.slice(0).sort(function(i,a){return i-a}),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const i of this.values)t+=Math.pow(i-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)typeof e[t]>"u"?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const s of this.values)e(s)&&t.push(s);return new pe(t)}}function bt(r,e){const t=new Blob([r],{type:"text/plain"});let s="";typeof window.webkitURL<"u"?s=window.webkitURL.createObjectURL(t):s=window.URL.createObjectURL(t);const i=document.createElement("a");i.id="jspsych-download-as-text-link",i.style.display="none",i.download=e,i.href=s,i.click()}function _t(r){const e=typeof r!="object"?JSON.parse(r):r;let t="",s="";const i=[];for(const a of e)for(const l in a){let o=l+"";o='"'+o.replace(/"/g,'""')+'",',i.includes(l)||(i.push(l),t+=o)}t=t.slice(0,-1),s+=t+`\r
`;for(const a of e){t="";for(const l of i){let o=typeof a[l]>"u"?"":a[l];typeof o=="object"&&(o=JSON.stringify(o));const n=o+"";t+='"'+n.replace(/"/g,'""')+'",'}t=t.slice(0,-1),s+=t+`\r
`}return s}function xt(){const r=window.location.search.substr(1).split("&"),e={};for(let t=0;t<r.length;++t){const s=r[t].split("=",2);s.length==1?e[s[0]]="":e[s[0]]=decodeURIComponent(s[1].replace(/\+/g," "))}return e}class E{constructor(e=[]){this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new E([this.trials[this.trials.length-1]])}first(e=1){if(e<1)throw`You must query with a positive nonzero integer. Please use a
               different value for n.`;return this.trials.length===0?new E:(e>this.trials.length&&(e=this.trials.length),new E(this.trials.slice(0,e)))}last(e=1){if(e<1)throw`You must query with a positive nonzero integer. Please use a
               different value for n.`;return this.trials.length===0?new E:(e>this.trials.length&&(e=this.trials.length),new E(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new E(T(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return this.trials.length>0&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;Array.isArray(e)?t=T(e):t=T([e]);const s=[];for(const i of this.trials){let a=!1;for(const l of t){let o=!0;for(const n of Object.keys(l))typeof i[n]<"u"&&i[n]===l[n]||(o=!1);if(o){a=!0;break}}a&&s.push(i)}return new E(s)}filterCustom(e){return new E(this.trials.filter(e))}filterColumns(e){return new E(this.trials.map(t=>Object.fromEntries(e.filter(s=>s in t).map(s=>[s,t[s]]))))}select(e){const t=[];for(const s of this.trials)typeof s[e]<"u"&&t.push(s[e]);return new pe(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=T(this.trials);for(const s of t)for(const i of e)delete s[i];return new E(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const s of Object.keys(t))e.includes(s)||e.push(s);return e}csv(){return _t(this.trials)}json(e=!1){return e?JSON.stringify(this.trials,null,"	"):JSON.stringify(this.trials)}localSave(e,t){e=e.toLowerCase();let s;if(e==="json")s=this.json();else if(e==="csv")s=this.csv();else throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');bt(s,t)}}class kt{constructor(e){this.dependencies=e,this.dataProperties={},this.interactionListeners={blur:()=>{this.addInteractionRecord("blur")},focus:()=>{this.addInteractionRecord("focus")},fullscreenchange:()=>{this.addInteractionRecord(document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit")}},this.reset()}reset(){this.results=new E,this.resultToTrialMap=new WeakMap,this.interactionRecords=new E}get(){return this.results}getInteractionData(){return this.interactionRecords}write(e){const t=e.getResult();Object.assign(t,this.dataProperties),this.results.push(t),this.resultToTrialMap.set(t,e)}addProperties(e){this.results.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.results.addToLast(e)}getLastTrialData(){return this.results.top()}getLastTimelineData(){const e=this.getLastTrialData().values()[0];return new E(e?this.resultToTrialMap.get(e).parent.getResults():[])}displayData(e="json"){e=e.toLowerCase(),e!=="json"&&e!=="csv"&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json");const t=document.createElement("pre");t.id="jspsych-data-display",t.textContent=e==="json"?this.results.json(!0):this.results.csv(),this.dependencies.getDisplayElement().replaceChildren(t)}urlVariables(){return typeof this.query_string>"u"&&(this.query_string=xt()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}addInteractionRecord(e){const t={event:e,...this.dependencies.getProgress()};this.interactionRecords.push(t),this.dependencies.onInteractionRecordAdded(t)}createInteractionListeners(){window.addEventListener("blur",this.interactionListeners.blur),window.addEventListener("focus",this.interactionListeners.focus),document.addEventListener("fullscreenchange",this.interactionListeners.fullscreenchange),document.addEventListener("mozfullscreenchange",this.interactionListeners.fullscreenchange),document.addEventListener("webkitfullscreenchange",this.interactionListeners.fullscreenchange)}removeInteractionListeners(){window.removeEventListener("blur",this.interactionListeners.blur),window.removeEventListener("focus",this.interactionListeners.focus),document.removeEventListener("fullscreenchange",this.interactionListeners.fullscreenchange),document.removeEventListener("mozfullscreenchange",this.interactionListeners.fullscreenchange),document.removeEventListener("webkitfullscreenchange",this.interactionListeners.fullscreenchange)}}class Et{constructor(e,t=!1,s=0){this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=s,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,de(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of[...this.listeners])t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,s){return!t&&this.heldKeys.has(s)?!1:e==="ALL_KEYS"?!0:e==="NO_KEYS"?!1:e.includes(s)}getKeyboardResponse({callback_function:e,valid_responses:t="ALL_KEYS",rt_method:s="performance",persist:i,audio_context:a,audio_context_start_time:l,allow_held_key:o=!1,minimum_valid_rt:n=this.minimumValidRt}){s!=="performance"&&s!=="audio"&&(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),s="performance");const d=s==="performance"?performance.now():l*1e3;this.registerRootListeners(),!this.areResponsesCaseSensitive&&typeof t!="string"&&(t=t.map(c=>c.toLowerCase()));const u=c=>{const p=Math.round((s=="performance"?performance.now():a.currentTime*1e3)-d);if(p<n)return;const f=this.toLowerCaseIfInsensitive(c.key);this.isResponseValid(t,o,f)&&(c.preventDefault(),i||this.cancelKeyboardResponse(u),e({key:c.key,rt:p}))};return this.listeners.add(u),u}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(typeof e!="string"&&e!==null||typeof t!="string"&&t!==null){console.error("Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.");return}return typeof e=="string"&&typeof t=="string"?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():e===null&&t===null}}var m=(r=>(r[r.BOOL=0]="BOOL",r[r.STRING=1]="STRING",r[r.INT=2]="INT",r[r.FLOAT=3]="FLOAT",r[r.FUNCTION=4]="FUNCTION",r[r.KEY=5]="KEY",r[r.KEYS=6]="KEYS",r[r.SELECT=7]="SELECT",r[r.HTML_STRING=8]="HTML_STRING",r[r.IMAGE=9]="IMAGE",r[r.AUDIO=10]="AUDIO",r[r.VIDEO=11]="VIDEO",r[r.OBJECT=12]="OBJECT",r[r.COMPLEX=13]="COMPLEX",r[r.TIMELINE=14]="TIMELINE",r))(m||{});class B{constructor(e,t={useWebAudio:!1}){this.src=e,this.useWebAudio=t.useWebAudio,this.audioContext=t.audioContext||null}async load(){this.useWebAudio?this.webAudioBuffer=await this.preloadWebAudio(this.src):this.audio=await this.preloadHTMLAudio(this.src)}play(){this.audio instanceof HTMLAudioElement?this.audio.play():(this.audio||(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.start())}stop(){this.audio instanceof HTMLAudioElement?(this.audio.pause(),this.audio.currentTime=0):(this.audio.stop(),this.audio=this.getAudioSourceNode(this.webAudioBuffer))}addEventListener(e,t){!this.audio&&this.webAudioBuffer&&(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.addEventListener(e,t)}removeEventListener(e,t){!this.audio&&this.webAudioBuffer&&(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.removeEventListener(e,t)}getAudioSourceNode(e){const t=this.audioContext.createBufferSource();return t.buffer=e,t.connect(this.audioContext.destination),t}async preloadWebAudio(e){const s=await(await fetch(e)).arrayBuffer(),i=await this.audioContext.decodeAudioData(s),a=this.audioContext.createBufferSource();return a.buffer=i,a.connect(this.audioContext.destination),i}async preloadHTMLAudio(e){return new Promise((t,s)=>{const i=new Audio(e);i.addEventListener("canplaythrough",()=>{t(i)}),i.addEventListener("error",a=>{s(a)}),i.addEventListener("abort",a=>{s(a)})})}}const Te=[m.AUDIO,m.IMAGE,m.VIDEO];class jt{constructor(e){this.useWebaudio=e,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null,this.useWebaudio&&typeof window<"u"&&typeof window.AudioContext<"u"&&(this.context=new AudioContext)}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}audioContext(){return this.context&&this.context.state!=="running"&&this.context.resume(),this.context}async getAudioPlayer(e){return this.audio_buffers[e]instanceof B?this.audio_buffers[e]:(this.audio_buffers[e]=new B(e,{useWebAudio:this.useWebaudio,audioContext:this.context}),await this.audio_buffers[e].load(),this.audio_buffers[e])}preloadAudio(e,t=()=>{},s=a=>{},i=a=>{}){e=W(e.flat());let a=0;if(e.length==0){t();return}for(const l of e)this.audio_buffers[l]instanceof B?(a++,s(l),a==e.length&&t()):(this.audio_buffers[l]=new B(l,{useWebAudio:this.useWebaudio,audioContext:this.context}),this.audio_buffers[l].load().then(()=>{a++,s(l),a==e.length&&t()}).catch(o=>{i(o)}))}preloadImages(e,t=()=>{},s=a=>{},i=a=>{}){e=W(e.flat());var a=0;if(e.length===0){t();return}for(let l=0;l<e.length;l++){const o=new Image,n=e[l];o.onload=()=>{a++,s(n),a===e.length&&t()},o.onerror=h=>{i({source:n,error:h})},o.src=n,this.img_cache[n]=o,this.preload_requests.push(o)}}preloadVideo(e,t=()=>{},s=a=>{},i=a=>{}){e=W(e.flat());let a=0;if(e.length===0){t();return}for(const l of e){const o=this.video_buffers,n=new XMLHttpRequest;n.open("GET",l,!0),n.responseType="blob",n.onload=()=>{if(n.status===200||n.status===0){const h=n.response;o[l]=URL.createObjectURL(h),a++,s(l),a===e.length&&t()}},n.onerror=h=>{let d=h;n.status==404&&(d="404"),i({source:l,error:d})},n.onloadend=h=>{n.status==404&&i({source:l,error:"404"})},n.send(),this.preload_requests.push(n)}}getAutoPreloadList(e){const t=Object.fromEntries(Te.map(i=>[i,new Set])),s=(i,a)=>{var o;if(typeof i.timeline<"u")for(const n of i.timeline)s(n,i.type??a);else if((o=i.type??a)!=null&&o.info){const{name:n,parameters:h}=(i.type??a).info;this.preloadMap.has(n)||this.preloadMap.set(n,Object.fromEntries(Object.entries(h).filter(([d,{type:u,preload:c}])=>Te.includes(u)&&(c??!0)).map(([d,{type:u}])=>[d,u])));for(const[d,u]of Object.entries(this.preloadMap.get(n))){const c=i[d],p=t[u];if(typeof c=="string")p.add(c);else if(Array.isArray(c))for(const f of c.flat())typeof f=="string"&&p.add(f)}}};return s({timeline:e}),{images:[...t[m.IMAGE]],audio:[...t[m.AUDIO]],video:[...t[m.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const s=new MediaRecorder(e,t);this.camera_recorder=s}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class Pt{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e,t=0){t>0?this.setJsPsychTimeout(()=>{this.keyDown(e),this.keyUp(e)},t):(this.keyDown(e),this.keyUp(e))}clickTarget(e,t=0){t>0?this.setJsPsychTimeout(()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t,s=0){s>0?this.setJsPsychTimeout(()=>{e.value=t},s):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let s;if(e=="NO_KEYS")s=null;else if(e=="ALL_KEYS")s=t[Math.floor(Math.random()*t.length)];else{const i=e.flat();s=i[Math.floor(Math.random()*i.length)]}return s}mergeSimulationData(e,t){return{...e,...t==null?void 0:t.data}}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&e.choices=="NO_KEYS"&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const s=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<s&&(t.rt=null,t.response=null)}}}class St{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const s=window.setTimeout(e,t);return this.timeout_handlers.push(s),s}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}function At(r){const e=r.getInitSettings(),t=new Et(r.getDisplayContainerElement,e.case_sensitive_responses,e.minimum_valid_rt),s=new St,i=new jt(e.use_webaudio),a=new Pt(r.getDisplayContainerElement,s.setTimeout.bind(s));return Object.assign({},...[t,s,i,a].map(l=>de(l)))}function It(r=Math.random().toString()){return Math.random=yt(r),r}function fe(r,e,t=!1){const s=Array.isArray(r),i=Array.isArray(e);if(!s)i?(e=[e[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(r=[r],e=[e]);else if(i){if(r.length!=e.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),e.length<r.length){let o=[];for(let n=0;n<r.length;n++)o.push(e);e=o}else e=e.slice(0,r.length)}else{let o=[];for(let n=0;n<r.length;n++)o.push(e);e=o}let a=[];for(let o=0;o<r.length;o++)for(let n=0;n<e[o];n++)r[o]==null||typeof r[o]!="object"?a.push(r[o]):a.push(Object.assign({},r[o]));let l=q(a);return t&&(l=Dt(l)),l}function q(r){Array.isArray(r)||console.error("Argument to shuffle() must be an array.");const e=r.slice(0);let t=e.length,s,i;for(;t;)i=Math.floor(Math.random()*t--),s=e[t],e[t]=e[i],e[i]=s;return e}function Lt(r,e){Array.isArray(r)||console.error("First argument to shuffleNoRepeats() must be an array."),typeof e<"u"&&typeof e!="function"&&console.error("Second argument to shuffleNoRepeats() must be a function."),typeof e>"u"&&(e=function(s,i){return s===i});const t=q(r);for(let s=0;s<t.length-1;s++)if(e(t[s],t[s+1])){let i=Math.floor(Math.random()*(t.length-2))+1;for(;e(t[s+1],t[i])||e(t[s+1],t[i+1])||e(t[s+1],t[i-1])||e(t[s],t[i]);)i=Math.floor(Math.random()*(t.length-2))+1;const a=t[i];t[i]=t[s+1],t[s+1]=a}return t}function qe(r,e=!1){const t=r.length;if(t==1)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),q(r[0]);let s=[];for(let o=0;o<t;o++)s.push(o);e&&(s=q(s));const i=[];let a=null;for(let o=0;o<t;o++)a=a===null?r[o].length:Math.min(a,r[o].length),i.push(q(r[o]));const l=[];for(let o=0;o<a;o++)for(let n=0;n<s.length;n++)l.push(i[s[n]][o]);return l}function De(r,e){return Array.isArray(r)||console.error("First argument to sampleWithoutReplacement() must be an array"),e>r.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),q(r).slice(0,e)}function Ve(r,e,t){Array.isArray(r)||console.error("First argument to sampleWithReplacement() must be an array");const s=[];if(typeof t<"u"){t.length!==r.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");let l=0;for(const o of t)l+=o;for(const o of t)s.push(o/l)}else for(let l=0;l<r.length;l++)s.push(1/r.length);const i=[s[0]];for(let l=1;l<s.length;l++)i.push(s[l]+i[l-1]);const a=[];for(let l=0;l<e;l++){const o=Math.random();let n=0;for(;o>i[n];)n++;a.push(r[n])}return a}function Tt(r,e=1,t=!1){let s=[{}];for(const[i,a]of Object.entries(r)){const l=[];for(const o of a)for(const n of s)l.push({...n,[i]:o});s=l}return fe(s,e,t)}function Ot(r=32){let e="";const t="0123456789abcdefghjklmnopqrstuvwxyz";for(let s=0;s<r;s++)e+=t[Math.floor(Math.random()*t.length)];return e}function Ct(r,e){if(e<r)throw new Error("Upper boundary must be greater than or equal to lower boundary");return r+Math.floor(Math.random()*(e-r+1))}function Rt(r){return Math.random()<=r?1:0}function ie(r,e){return qt()*e+r}function ne(r){return-Math.log(Math.random())/r}function Nt(r,e,t,s=!1){let i=ie(r,e)+ne(t);if(s)for(;i<=0;)i=ie(r,e)+ne(t);return i}function Mt(r){return mt(r)}function qt(){for(var r=0,e=0;r===0;)r=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*e)}function Dt(r){const e={};for(const t of r)for(const s of Object.keys(t))typeof e[s]>"u"&&(e[s]=[]),e[s].push(t[s]);return e}var Vt=Object.freeze({__proto__:null,factorial:Tt,randomID:Ot,randomInt:Ct,randomWords:Mt,repeat:fe,sampleBernoulli:Rt,sampleExGaussian:Nt,sampleExponential:ne,sampleNormal:ie,sampleWithReplacement:Ve,sampleWithoutReplacement:De,setSeed:It,shuffle:q,shuffleAlternateGroups:qe,shuffleNoRepeats:Lt});function Be(){const r={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},e=function(i,a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const l="[\\?&]"+a+"=([^&#]*)",n=new RegExp(l).exec(i);return n==null?"":n[1]},t=e(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map(function(i){r[i]=unescape(e(t,i))}),r.previewMode=r.assignmentId=="ASSIGNMENT_ID_NOT_AVAILABLE",r.outsideTurk=!r.previewMode&&r.hitId===""&&r.assignmentId==""&&r.workerId=="",r}function Bt(r){const e=Be(),t=e.assignmentId,s=e.turkSubmitTo;if(!t||!s)return;const i=document.createElement("form");i.method="POST",i.action=s+"/mturk/externalSubmit?assignmentId="+t;for(const a in r)if(r.hasOwnProperty(a)){const l=document.createElement("input");l.type="hidden",l.name=a,l.id=a,l.value=r[a],i.appendChild(l)}document.body.appendChild(i),i.submit()}var zt=Object.freeze({__proto__:null,submitToTurk:Bt,turkInfo:Be});class Gt{constructor(e,t){this.containerElement=e,this.message=t,this._progress=0,this.setupElements()}setupElements(){this.messageSpan=document.createElement("span"),this.innerDiv=document.createElement("div"),this.innerDiv.id="jspsych-progressbar-inner",this.update();const e=document.createElement("div");e.id="jspsych-progressbar-outer",e.appendChild(this.innerDiv),this.containerElement.appendChild(this.messageSpan),this.containerElement.appendChild(e)}update(){this.innerDiv.style.width=this._progress*100+"%",typeof this.message=="function"?this.messageSpan.innerHTML=this.message(this._progress):this.messageSpan.innerHTML=this.message}set progress(e){if(typeof e!="number"||e<0||e>1)throw new Error("jsPsych.progressBar.progress must be a number between 0 and 1");this._progress=e,this.update()}get progress(){return this._progress}}class re{constructor(e){this.name=e}}const Kt=["timeline","timeline_variables","name","repetitions","loop_function","conditional_function","randomize_order","sample","on_timeline_start","on_timeline_finish"];function $t(r){return!oe(r)}function oe(r){return!!r.timeline||Array.isArray(r)}var k=(r=>(r[r.PENDING=0]="PENDING",r[r.RUNNING=1]="RUNNING",r[r.PAUSED=2]="PAUSED",r[r.COMPLETED=3]="COMPLETED",r[r.ABORTED=4]="ABORTED",r))(k||{});class ze{constructor(){this.reset()}reset(){this.promise=new Promise(e=>{this.resolvePromise=e})}get(){return this.promise}resolve(e){this.resolvePromise(e),this.reset()}}function Ut(r){return r&&typeof r.then=="function"}function Jt(r){return new Promise(e=>setTimeout(e,r))}function Oe([r,...e]){let t=r??"";for(const s of e)t+=Number.isNaN(Number.parseInt(s))?`.${s}`:`[${s}]`;return t}function Ft(r){return typeof r=="object"&&r!==null}class me{constructor(){this.cache=new Map}static lookupChild(e,t){let s=!1,i;return Number.isNaN(Number.parseInt(t))?Object.hasOwn(e,t)&&(s=!0,i=e[t]):Number.parseInt(t)<e.length&&(s=!0,i=e[t]),{doesPathExist:s,value:i}}get(e){return this.cache.get(e.join("."))}has(e){return this.cache.has(e.join("."))}initialize(e){this.rootObject=e,this.cache.set("",e)}reset(){this.cache.clear(),this.cache.set("",this.rootObject)}set(e,t){this.cache.set(e.join("."),t)}lookup(e){if(this.has(e))return{doesPathExist:!0,value:this.get(e)};const t=s=>{const i=s.slice(0,-1),a=s[s.length-1];if(!this.has(i)&&i.length>0&&!t(i).doesPathExist)return{doesPathExist:!1};const l=this.get(i);if(!Ft(l))return{doesPathExist:!1};const o=me.lookupChild(l,a);return o.doesPathExist&&this.set(s,o.value),o};return t(e)}}class Ge{constructor(e){this.dependencies=e,this.status=k.PENDING,this.parameterValueCache=new me}getStatus(){return this.status}initializeParameterValueCache(){this.parameterValueCache.initialize(this.description)}resetParameterValueCache(){var e;this.parameterValueCache.reset(),(e=this.parent)==null||e.resetParameterValueCache()}getParameterValue(e,t={}){const{evaluateFunctions:s=!0,recursive:i=!0,cacheResult:a=!0,replaceResult:l}=t;typeof e=="string"&&(e=[e]);let{doesPathExist:o,value:n}=this.parameterValueCache.lookup(e);return!o&&i&&this.parent&&(n=this.parent.getParameterValue(e,t)),typeof n=="function"&&s&&(n=n()),n instanceof re&&(n=this.evaluateTimelineVariable(n)),typeof l=="function"&&(n=l(n)),a&&this.parameterValueCache.set(e,n),n}getDataParameter(){var t;const e=this.getParameterValue("data",{recursive:!1});return{...Object.fromEntries(typeof e=="object"?Object.keys(e).map(s=>[s,this.getParameterValue(["data",s])]):[]),...(t=this.parent)==null?void 0:t.getDataParameter()}}}class Q extends Ge{constructor(e,t,s){var i;if(super(e),this.description=t,this.parent=s,this.onLoad=()=>{this.runParameterCallback("on_load"),this.dependencies.runOnLoadExtensionCallbacks(this.getParameterValue("extensions"))},this.initializeParameterValueCache(),this.trialObject=T(t),this.pluginClass=this.getParameterValue("type",{evaluateFunctions:!1}),this.pluginInfo=(i=this.pluginClass)==null?void 0:i.info,!this.pluginInfo)throw new Error("Plugin not recognized. Please provide a valid plugin using the 'type' parameter.");!("version"in this.pluginInfo)&&!("data"in this.pluginInfo)?console.warn(this.pluginInfo.name,"is missing the 'version' and 'data' fields. Please update plugin as 'version' and 'data' will be required in v9. See https://www.jspsych.org/latest/developers/plugin-development/ for more details."):"version"in this.pluginInfo?"data"in this.pluginInfo||console.warn(this.pluginInfo.name,"is missing the 'data' field. Please update plugin as 'data' will be required in v9. See https://www.jspsych.org/latest/developers/plugin-development/ for more details."):console.warn(this.pluginInfo.name,"is missing the 'version' field. Please update plugin as 'version' will be required in v9. See https://www.jspsych.org/latest/developers/plugin-development/ for more details.")}async run(){this.status=k.RUNNING,this.processParameters(),this.onStart(),this.addCssClasses(),this.pluginInstance=this.dependencies.instantiatePlugin(this.pluginClass),this.result=this.processResult(await this.executeTrial()),this.dependencies.onTrialResultAvailable(this),this.status=k.COMPLETED,await this.onFinish(),this.removeCssClasses();const e=this.getParameterValue("post_trial_gap")??this.dependencies.getDefaultIti();e!==0&&this.dependencies.getSimulationMode()!=="data-only"&&await Jt(e),this.resetParameterValueCache()}async executeTrial(){const e=this.dependencies.finishTrialPromise.get();let t=!1;e.then(()=>{t=!0});const{trialReturnValue:s,hasTrialBeenSimulated:i}=this.invokeTrialMethod();let a;return Ut(s)?(a=await Promise.race([s,e]),t&&(a=await e)):(i||this.onLoad(),a=await e),this.cleanupTrial(),a}invokeTrialMethod(){const e=this.dependencies.getSimulationMode();if(e&&typeof this.pluginInstance.simulate=="function"){const t=this.getSimulationOptions();if(t.simulate!==!1)return{hasTrialBeenSimulated:!0,trialReturnValue:this.pluginInstance.simulate(this.trialObject,t.mode??e,t,this.onLoad)}}return{hasTrialBeenSimulated:!1,trialReturnValue:this.pluginInstance.trial(this.dependencies.getDisplayElement(),this.trialObject,this.onLoad)}}cleanupTrial(){this.dependencies.clearAllTimeouts(),this.dependencies.getDisplayElement().innerHTML=""}addCssClasses(){const e=this.getParameterValue("css_classes"),t=this.dependencies.getDisplayElement().classList;typeof e=="string"?t.add(e):Array.isArray(e)&&t.add(...e)}removeCssClasses(){const e=this.getParameterValue("css_classes");e&&this.dependencies.getDisplayElement().classList.remove(...typeof e=="string"?[e]:e)}processResult(e){e||(e={});for(const[s,i]of Object.entries(this.getParameterValue("save_trial_parameters")??{}))if(this.pluginInfo.parameters[s])if(i&&!Object.hasOwn(e,s)){let a=this.trialObject[s];typeof a=="function"&&(a=a.toString()),e[s]=a}else!i&&Object.hasOwn(e,s)&&delete e[s];else console.warn(`Non-existent parameter "${s}" specified in save_trial_parameters.`);e={...this.getDataParameter(),...e,trial_type:this.pluginInfo.name,trial_index:this.index,plugin_version:this.pluginInfo.version?this.pluginInfo.version:null};const t=this.getParameterValue("save_timeline_variables");return t===!0?e.timeline_variables={...this.parent.getAllTimelineVariables()}:Array.isArray(t)&&(e.timeline_variables=Object.fromEntries(Object.entries(this.parent.getAllTimelineVariables()).filter(([s,i])=>t.includes(s)))),e}runParameterCallback(e,...t){const s=this.getParameterValue(e,{evaluateFunctions:!1});if(s)return s(...t)}onStart(){this.dependencies.onTrialStart(this),this.runParameterCallback("on_start",this.trialObject),this.dependencies.runOnStartExtensionCallbacks(this.getParameterValue("extensions"))}async onFinish(){const e=await this.dependencies.runOnFinishExtensionCallbacks(this.getParameterValue("extensions"));Object.assign(this.result,e),await Promise.resolve(this.runParameterCallback("on_finish",this.getResult())),this.dependencies.onTrialFinished(this)}evaluateTimelineVariable(e){var t;return(t=this.parent)==null?void 0:t.evaluateTimelineVariable(e)}getParameterValue(e,t={}){return Kt.includes(typeof e=="string"?e:e[0])&&(t.recursive=!1),super.getParameterValue(e,t)}getSimulationOptions(){const e=this.getParameterValue("simulation_options",{replaceResult:(t={})=>{if(typeof t=="string"){const s=this.dependencies.getGlobalSimulationOptions();t=s[t]??s.default??{}}return H(T(this.dependencies.getGlobalSimulationOptions().default),T(t))}});return typeof e>"u"?{}:(e.mode=this.getParameterValue(["simulation_options","mode"]),e.simulate=this.getParameterValue(["simulation_options","simulate"]),e.data=this.getParameterValue(["simulation_options","data"]),typeof e.data=="object"&&(e.data=Object.fromEntries(Object.keys(e.data).map(t=>[t,this.getParameterValue(["simulation_options","data",t])]))),e)}getResult(){return this.getParameterValue("record_data")===!1?void 0:this.result}getResults(){const e=this.getResult();return e?[e]:[]}processParameters(){const e=(s,i,a=[])=>{for(const[l,o]of Object.entries(i)){const n=[...a,l];let h=this.getParameterValue(n,{evaluateFunctions:o.type!==m.FUNCTION,replaceResult:d=>{if(typeof d>"u"){if(typeof o.default>"u")throw new Error(`You must specify a value for the "${Oe(n)}" parameter in the "${this.pluginInfo.name}" plugin.`);return o.default}else return d}});if(o.array&&!Array.isArray(h)){const d=Oe(n);throw new Error(`A non-array value (\`${h}\`) was provided for the array parameter "${d}" in the "${this.pluginInfo.name}" plugin. Please make sure that "${d}" is an array.`)}o.type===m.COMPLEX&&o.nested&&(o.array?h=h.map((d,u)=>{const c=[...n,u.toString()],p=this.getParameterValue(c);return e(p,o.nested,c),p}):e(h,o.nested,n)),s[l]=h}},t=T(this.description);e(t,this.pluginInfo.parameters),this.trialObject=t}getLatestNode(){return this}getActiveTimelineByName(e){}}class M extends Ge{constructor(e,t,s){super(e),this.parent=s,this.children=[],this.shouldAbort=!1,this.resumePromise=new ze,this.description=Array.isArray(t)?{timeline:t}:t,this.initializeParameterValueCache()}async run(){typeof this.index>"u"&&(this.index=0),this.status=k.RUNNING;const{conditional_function:e,loop_function:t,repetitions:s=1}=this.description;let i=this.generateTimelineVariableOrder();this.setCurrentTimelineVariablesByIndex(i[0]);let a=!0,l;if(!e||e()){this.onStart();for(let o=0;o<s;o++)do{l=[],a?a=!1:i=this.generateTimelineVariableOrder();for(const n of i){this.setCurrentTimelineVariablesByIndex(n);for(const h of this.description.timeline){const d=this.instantiateChildNode(h),u=this.currentChild;if(this.currentChild=d,d.index=u?u.getLatestNode().index+1:this.index,await d.run(),this.status===k.PAUSED&&await this.resumePromise.get(),this.shouldAbort){this.status=k.ABORTED;return}l.push(...this.currentChild.getResults())}}}while(t&&t(new E(l)));this.onFinish()}this.status=k.COMPLETED}onStart(){this.description.on_timeline_start&&this.description.on_timeline_start()}onFinish(){this.description.on_timeline_finish&&this.description.on_timeline_finish()}pause(){this.currentChild instanceof M&&this.currentChild.pause(),this.status=k.PAUSED}resume(){this.status==k.PAUSED&&(this.currentChild instanceof M&&this.currentChild.resume(),this.status=k.RUNNING,this.resumePromise.resolve())}abort(){(this.status===k.RUNNING||this.status===k.PAUSED)&&(this.currentChild instanceof M&&this.currentChild.abort(),this.shouldAbort=!0,this.status===k.PAUSED&&this.resume())}instantiateChildNode(e){const t=oe(e)?new M(this.dependencies,e,this):new Q(this.dependencies,e,this);return this.children.push(t),t}setCurrentTimelineVariablesByIndex(e){var t;this.currentTimelineVariables={...(t=this.parent)==null?void 0:t.getAllTimelineVariables(),...e===null?void 0:this.description.timeline_variables[e]}}generateTimelineVariableOrder(){var i;const e=(i=this.description.timeline_variables)==null?void 0:i.length;if(!e)return[null];let t=[...Array(e).keys()];const s=this.description.sample;if(s)switch(s.type){case"custom":t=s.fn(t);break;case"with-replacement":t=Ve(t,s.size,s.weights);break;case"without-replacement":t=De(t,s.size);break;case"fixed-repetitions":t=fe(t,s.size);break;case"alternate-groups":t=qe(s.groups,s.randomize_group_order);break;default:throw new Error(`Invalid type "${s.type}" in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"`)}return this.description.randomize_order&&(t=q(t)),t}getAllTimelineVariables(){return this.currentTimelineVariables}evaluateTimelineVariable(e){var t;if((t=this.currentTimelineVariables)!=null&&t.hasOwnProperty(e.name))return this.currentTimelineVariables[e.name];throw new Error(`Timeline variable ${e.name} not found.`)}getResults(){const e=[];for(const t of this.children)if(t instanceof Q){const s=t.getResult();s&&e.push(s)}else t instanceof M&&e.push(...t.getResults());return e}getNaiveProgress(){if(this.status===k.PENDING)return 0;const e=this.getLatestNode();if(!e)return 1;let t=e.index;return e.getStatus()===k.COMPLETED&&t++,Math.min(t/this.getNaiveTrialCount(),1)}getNaiveTrialCount(){const e=t=>{var i,a;const s=l=>l.map(o=>e(o)).reduce((o,n)=>o+n);if(Array.isArray(t))return s(t);if($t(t))return 1;if(oe(t)){let l=((i=t.timeline_variables)==null?void 0:i.length)||1;switch((a=t.sample)==null?void 0:a.type){case"with-replacement":case"without-replacement":l=t.sample.size;break;case"fixed-repetitions":l*=t.sample.size;break;case"alternate-groups":l=t.sample.groups.map(o=>o.length).reduce((o,n)=>o+n,0);break}return s(t.timeline)*(t.repetitions??1)*l}return 0};return e(this.description)}getLatestNode(){var e;return((e=this.currentChild)==null?void 0:e.getLatestNode())??this}getActiveTimelineByName(e){var t;return this.description.name===e?this:(t=this.currentChild)==null?void 0:t.getActiveTimelineByName(e)}}class Wt{constructor(e){this.turk=zt,this.randomization=Vt,this.utils=vt,this.citation={apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '},this.options={},this.isFileProtocolUsed=!1,this.finishTrialPromise=new ze,this.timelineDependencies={onTrialStart:t=>{this.options.on_trial_start(t.trialObject),this.getDisplayContainerElement().focus(),this.getDisplayElement().scrollTop=0},onTrialResultAvailable:t=>{const s=t.getResult();s&&(s.time_elapsed=this.getTotalTime(),this.data.write(t))},onTrialFinished:t=>{const s=t.getResult();this.options.on_trial_finish(s),s&&this.options.on_data_update(s),this.progressBar&&this.options.auto_update_progress_bar&&(this.progressBar.progress=this.timeline.getNaiveProgress())},runOnStartExtensionCallbacks:t=>this.extensionManager.onStart(t),runOnLoadExtensionCallbacks:t=>this.extensionManager.onLoad(t),runOnFinishExtensionCallbacks:t=>this.extensionManager.onFinish(t),getSimulationMode:()=>this.simulationMode,getGlobalSimulationOptions:()=>this.simulationOptions,instantiatePlugin:t=>new t(this),getDisplayElement:()=>this.getDisplayElement(),getDefaultIti:()=>this.getInitSettings().default_iti,finishTrialPromise:this.finishTrialPromise,clearAllTimeouts:()=>this.pluginAPI.clearAllTimeouts()},this.extensionManagerDependencies={instantiateExtension:t=>new t(this)},this.dataDependencies={getProgress:()=>{var t;return{time:this.getTotalTime(),trial:((t=this.timeline)==null?void 0:t.getLatestNode().index)??0}},onInteractionRecordAdded:t=>{this.options.on_interaction_data_update(t)},getDisplayElement:()=>this.getDisplayElement()},e={display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[],...e},this.options=e,de(this),window.location.protocol=="file:"&&(e.override_safe_mode===!1||typeof e.override_safe_mode>"u")&&(e.use_webaudio=!1,this.isFileProtocolUsed=!0,console.warn("jsPsych detected that it is running via the file:// protocol and not on a web server. To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. For more information, see: https://www.jspsych.org/overview/running-experiments")),this.data=new kt(this.dataDependencies),this.pluginAPI=At(this),this.extensionManager=new X(this.extensionManagerDependencies,e.extensions)}version(){return wt}async run(e){typeof e>"u"&&console.error("No timeline declared in jsPsych.run(). Cannot start experiment."),e.length===0&&console.error("No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment."),this.timeline=new M(this.timelineDependencies,e),await this.prepareDom(),await this.extensionManager.initializeExtensions(),document.documentElement.setAttribute("jspsych","present"),this.experimentStartTime=new Date,await this.timeline.run(),await Promise.resolve(this.options.on_finish(this.data.get())),this.endMessage&&(this.getDisplayElement().innerHTML=this.endMessage),this.data.removeInteractionListeners()}async simulate(e,t="data-only",s={}){this.simulationMode=t,this.simulationOptions=s,await this.run(e)}getProgress(){var e,t,s;return{total_trials:(e=this.timeline)==null?void 0:e.getNaiveTrialCount(),current_trial_global:((t=this.timeline)==null?void 0:t.getLatestNode().index)??0,percent_complete:((s=this.timeline)==null?void 0:s.getNaiveProgress())*100}}getStartTime(){return this.experimentStartTime}getTotalTime(){return this.experimentStartTime?new Date().getTime()-this.experimentStartTime.getTime():0}getDisplayElement(){return this.displayElement}getDisplayContainerElement(){return this.displayContainerElement}abortExperiment(e,t={}){this.endMessage=e,this.timeline.abort(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}abortCurrentTimeline(){var t;let e=(t=this.timeline)==null?void 0:t.getLatestNode();e instanceof Q&&(e=e.parent),e instanceof M&&e.abort()}abortTimelineByName(e){var s;const t=(s=this.timeline)==null?void 0:s.getActiveTimelineByName(e);t&&t.abort()}getCurrentTrial(){var t;const e=(t=this.timeline)==null?void 0:t.getLatestNode();if(e instanceof Q)return e.description}getInitSettings(){return this.options}timelineVariable(e){return new re(e)}evaluateTimelineVariable(e){var t,s;return(s=(t=this.timeline)==null?void 0:t.getLatestNode())==null?void 0:s.evaluateTimelineVariable(new re(e))}pauseExperiment(){var e;(e=this.timeline)==null||e.pause()}resumeExperiment(){var e;(e=this.timeline)==null||e.resume()}getSafeModeStatus(){return this.isFileProtocolUsed}getTimeline(){var e;return(e=this.timeline)==null?void 0:e.description.timeline}getCitations(e=[],t="apa"){const s=["apa","bibtex"];if(t=t.toLowerCase(),Array.isArray(e))if(s.includes(t)){const i=this.citation[t],a=new Set([i]);for(const o of e)try{const n=o.info.citations[t];a.add(n)}catch{console.error(`${o} does not have citation in ${t} format.`)}return Array.from(a).join(`
`)}else throw new Error("Unsupported citation format");else throw new Error("Expected array of plugins/extensions")}get extensions(){var e;return((e=this.extensionManager)==null?void 0:e.extensions)??{}}async prepareDom(){document.readyState!=="complete"&&await new Promise(i=>{window.addEventListener("load",i)});const e=this.options;if(typeof e.display_element>"u"){let i=document.body;i||(i=document.createElement("body"),document.documentElement.appendChild(i)),document.querySelector("html").style.height="100%",i.style.margin="0px",i.style.height="100%",i.style.width="100%",e.display_element=i}else{const i=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);i===null?console.error("The display_element specified in initJsPsych() does not exist in the DOM."):e.display_element=i}const t=document.createElement("div");t.id="jspsych-content";const s=document.createElement("div");if(s.className="jspsych-content-wrapper",s.appendChild(t),this.displayContainerElement=e.display_element,this.displayContainerElement.appendChild(s),this.displayElement=t,e.experiment_width!==null&&(this.displayElement.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,this.displayContainerElement.classList.add("jspsych-display-element"),this.displayElement.classList.add("jspsych-content"),this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close),this.options.show_progress_bar){const i=document.createElement("div");i.id="jspsych-progressbar-container",this.progressBar=new Gt(i,this.options.message_progress_bar),this.getDisplayContainerElement().insertAdjacentElement("afterbegin",i)}}finishTrial(e){this.finishTrialPromise.resolve(e)}}class N extends Error{constructor(e="The global `jsPsych` variable is no longer available in jsPsych v7."){super(`${e} Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.`),this.name="MigrationError"}}window.jsPsych={get init(){throw new N("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new N},get randomization(){throw new N},get turk(){throw new N},get pluginAPI(){throw new N},get ALL_KEYS(){throw new N('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new N('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};typeof window<"u"&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);function Yt(r){const e=new Wt(r);return Object.defineProperties(e,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map(([s,i])=>[s,{get(){throw new N(i)}}]))),e}var Xt="2.1.0";const Ht={name:"instructions",version:Xt,parameters:{pages:{type:m.HTML_STRING,default:void 0,array:!0},key_forward:{type:m.KEY,default:"ArrowRight"},key_backward:{type:m.KEY,default:"ArrowLeft"},allow_backward:{type:m.BOOL,default:!0},allow_keys:{type:m.BOOL,default:!0},show_clickable_nav:{type:m.BOOL,default:!1},show_page_number:{type:m.BOOL,default:!1},page_label:{type:m.STRING,default:"Page"},button_label_previous:{type:m.STRING,default:"Previous"},button_label_next:{type:m.STRING,default:"Next"},on_page_change:{type:m.FUNCTION,pretty_name:"Page change callback",default:function(r){}}},data:{view_history:{type:m.COMPLEX,array:!0,nested:{page_index:{type:m.INT},viewing_time:{type:m.INT}}},rt:{type:m.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}},ye=class ye{constructor(e){this.jsPsych=e}trial(e,t){var s=0,i=[],a=performance.now(),l=a;function o(){this.id==="jspsych-instructions-back"?d():this.id==="jspsych-instructions-next"&&h()}function n(){var g=t.pages[s],v="";if(t.show_page_number&&(v="<span style='margin: 0 1em;' class='jspsych-instructions-pagenum'>"+t.page_label+" "+(s+1)+"/"+t.pages.length+"</span>"),t.show_clickable_nav){var b="<div class='jspsych-instructions-nav' style='padding: 10px 0px;'>";if(t.allow_backward){var j=s>0?"":"disabled='disabled'";b+="<button id='jspsych-instructions-back' class='jspsych-btn' style='margin-right: 5px;' "+j+">&lt; "+t.button_label_previous+"</button>"}t.pages.length>1&&t.show_page_number&&(b+=v),b+="<button id='jspsych-instructions-next' class='jspsych-btn'style='margin-left: 5px;'>"+t.button_label_next+" &gt;</button></div>",g+=b,e.innerHTML=g,s!=0&&t.allow_backward&&e.querySelector("#jspsych-instructions-back").addEventListener("click",o,{once:!0}),e.querySelector("#jspsych-instructions-next").addEventListener("click",o,{once:!0})}else t.show_page_number&&t.pages.length>1&&(g+="<div class='jspsych-instructions-pagenum'>"+v+"</div>"),e.innerHTML=g}function h(){u(),s++,s>=t.pages.length?c():n(),t.on_page_change(s)}function d(){u(),s--,n(),t.on_page_change(s)}function u(){var g=performance.now(),v=Math.round(g-l);i.push({page_index:s,viewing_time:v}),l=g}const c=()=>{t.allow_keys&&this.jsPsych.pluginAPI.cancelKeyboardResponse(f);var g={view_history:i,rt:Math.round(performance.now()-a)};this.jsPsych.finishTrial(g)},p=g=>{f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:p,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1,allow_held_key:!1}),this.jsPsych.pluginAPI.compareKeys(g.key,t.key_backward)&&s!==0&&t.allow_backward&&d(),this.jsPsych.pluginAPI.compareKeys(g.key,t.key_forward)&&h()};if(n(),t.allow_keys)var f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:p,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1})}simulate(e,t,s,i){t=="data-only"&&(i(),this.simulate_data_only(e,s)),t=="visual"&&this.simulate_visual(e,s,i)}create_simulation_data(e,t){var n,h,d,u,c,p;let s=0,i=0,a=[];if(!((n=t.data)!=null&&n.view_history)&&!((h=t.data)!=null&&h.rt))for(;s!==e.pages.length;){const f=Math.round(this.jsPsych.randomization.sampleExGaussian(3e3,300,.0033333333333333335));a.push({page_index:s,viewing_time:f}),i+=f,s==0||!e.allow_backward||this.jsPsych.randomization.sampleBernoulli(.9)==1?s++:s--}if(!((d=t.data)!=null&&d.view_history)&&((u=t.data)!=null&&u.rt)){for(i=t.data.rt;s!==e.pages.length;)a.push({page_index:s,viewing_time:null}),s==0||!e.allow_backward||this.jsPsych.randomization.sampleBernoulli(.9)==1?s++:s--;const f=t.data.rt/a.length;let g=0;for(const j of a){const S=Math.round(this.jsPsych.randomization.sampleExGaussian(f,f/10,1/(f/10)));j.viewing_time=S,g+=S}const v=t.data.rt-g,b=Math.round(v/a.length);for(const j of a)j.viewing_time+=b}if((c=t.data)!=null&&c.view_history&&!((p=t.data)!=null&&p.rt)){a=t.data.view_history,i=0;for(const f of t.data.view_history)i+=f.viewing_time}const l={view_history:a,rt:i},o=this.jsPsych.pluginAPI.mergeSimulationData(l,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,o),o}simulate_data_only(e,t){const s=this.create_simulation_data(e,t);this.jsPsych.finishTrial(s)}simulate_visual(e,t,s){const i=this.create_simulation_data(e,t),a=this.jsPsych.getDisplayElement();this.trial(a,e),s();const l=d=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_forward,d):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(a.querySelector("#jspsych-instructions-next"),d)},o=d=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_backward,d):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(a.querySelector("#jspsych-instructions-back"),d)};let n=0,h=0;for(let d=0;d<i.view_history.length;d++)d==i.view_history.length-1?l(h+i.view_history[d].viewing_time):(i.view_history[d+1].page_index>n&&l(h+i.view_history[d].viewing_time),i.view_history[d+1].page_index<n&&o(h+i.view_history[d].viewing_time),h+=i.view_history[d].viewing_time,n=i.view_history[d+1].page_index)}};ye.info=Ht;let ae=ye;var Qt="2.1.0";const Zt={name:"survey-text",version:Qt,parameters:{questions:{type:m.COMPLEX,array:!0,default:void 0,nested:{prompt:{type:m.HTML_STRING,default:void 0},placeholder:{type:m.STRING,default:""},rows:{type:m.INT,default:1},columns:{type:m.INT,default:40},required:{type:m.BOOL,default:!1},name:{type:m.STRING,default:""}}},randomize_question_order:{type:m.BOOL,default:!1},preamble:{type:m.HTML_STRING,default:null},button_label:{type:m.STRING,default:"Continue"},autocomplete:{type:m.BOOL,default:!1}},data:{response:{type:m.OBJECT},rt:{type:m.INT},question_order:{type:m.INT,array:!0}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}},we=class we{constructor(e){this.jsPsych=e}trial(e,t){for(var s=0;s<t.questions.length;s++)typeof t.questions[s].rows>"u"&&(t.questions[s].rows=1);for(var s=0;s<t.questions.length;s++)typeof t.questions[s].columns>"u"&&(t.questions[s].columns=40);for(var s=0;s<t.questions.length;s++)typeof t.questions[s].value>"u"&&(t.questions[s].value="");var i="";t.preamble!==null&&(i+='<div id="jspsych-survey-text-preamble" class="jspsych-survey-text-preamble">'+t.preamble+"</div>"),t.autocomplete?i+='<form id="jspsych-survey-text-form">':i+='<form id="jspsych-survey-text-form" autocomplete="off">';for(var a=[],s=0;s<t.questions.length;s++)a.push(s);t.randomize_question_order&&(a=this.jsPsych.randomization.shuffle(a));for(var s=0;s<t.questions.length;s++){var l=t.questions[a[s]],o=a[s];i+='<div id="jspsych-survey-text-'+o+'" class="jspsych-survey-text-question" style="margin: 2em 0em;">',i+='<p class="jspsych-survey-text">'+l.prompt+"</p>";var n=s==0?"autofocus":"",h=l.required?"required":"";l.rows==1?i+='<input type="text" id="input-'+o+'"  name="#jspsych-survey-text-response-'+o+'" data-name="'+l.name+'" size="'+l.columns+'" '+n+" "+h+' placeholder="'+l.placeholder+'"></input>':i+='<textarea id="input-'+o+'" name="#jspsych-survey-text-response-'+o+'" data-name="'+l.name+'" cols="'+l.columns+'" rows="'+l.rows+'" '+n+" "+h+' placeholder="'+l.placeholder+'"></textarea>',i+="</div>"}i+='<input type="submit" id="jspsych-survey-text-next" class="jspsych-btn jspsych-survey-text" value="'+t.button_label+'"></input>',i+="</form>",e.innerHTML=i,e.querySelector("#input-"+a[0]).focus(),e.querySelector("#jspsych-survey-text-form").addEventListener("submit",u=>{u.preventDefault();for(var c=performance.now(),p=Math.round(c-d),f={},g=0;g<t.questions.length;g++){var v="Q"+g,b=document.querySelector("#jspsych-survey-text-"+g).querySelector("textarea, input"),j=b.value,S=b.attributes["data-name"].value;S==""&&(S=v);var y={};y[S]=j,Object.assign(f,y)}var w={rt:p,response:f};this.jsPsych.finishTrial(w)});var d=performance.now()}simulate(e,t,s,i){t=="data-only"&&(i(),this.simulate_data_only(e,s)),t=="visual"&&this.simulate_visual(e,s,i)}create_simulation_data(e,t){const s={};let i=1e3;for(const o of e.questions){const n=o.name?o.name:`Q${e.questions.indexOf(o)}`,h=o.rows==1?this.jsPsych.randomization.sampleExponential(.25):this.jsPsych.randomization.randomInt(1,10)*o.rows;s[n]=this.jsPsych.randomization.randomWords({exactly:h,join:" "}),i+=this.jsPsych.randomization.sampleExGaussian(2e3,400,.004,!0)}const a={response:s,rt:i},l=this.jsPsych.pluginAPI.mergeSimulationData(a,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,l),l}simulate_data_only(e,t){const s=this.create_simulation_data(e,t);this.jsPsych.finishTrial(s)}simulate_visual(e,t,s){const i=this.create_simulation_data(e,t),a=this.jsPsych.getDisplayElement();this.trial(a,e),s();const l=Object.entries(i.response).map(o=>o[1]);for(let o=0;o<l.length;o++)this.jsPsych.pluginAPI.fillTextInput(a.querySelector(`#input-${o}`),l[o],(i.rt-1e3)/l.length*(o+1));this.jsPsych.pluginAPI.clickTarget(a.querySelector("#jspsych-survey-text-next"),i.rt)}};we.info=Zt;let le=we;var es="2.1.0";const ts={name:"html-keyboard-response",version:es,parameters:{stimulus:{type:m.HTML_STRING,default:void 0},choices:{type:m.KEYS,default:"ALL_KEYS"},prompt:{type:m.HTML_STRING,default:null},stimulus_duration:{type:m.INT,default:null},trial_duration:{type:m.INT,default:null},response_ends_trial:{type:m.BOOL,default:!0}},data:{response:{type:m.STRING},rt:{type:m.INT},stimulus:{type:m.STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}},ve=class ve{constructor(e){this.jsPsych=e}trial(e,t){var s='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";t.prompt!==null&&(s+=t.prompt),e.innerHTML=s;var i={rt:null,key:null};const a=()=>{typeof o<"u"&&this.jsPsych.pluginAPI.cancelKeyboardResponse(o);var n={rt:i.rt,stimulus:t.stimulus,response:i.key};this.jsPsych.finishTrial(n)};var l=n=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",i.key==null&&(i=n),t.response_ends_trial&&a()};if(t.choices!="NO_KEYS")var o=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:l,valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});t.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"},t.stimulus_duration),t.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(a,t.trial_duration)}simulate(e,t,s,i){t=="data-only"&&(i(),this.simulate_data_only(e,s)),t=="visual"&&this.simulate_visual(e,s,i)}create_simulation_data(e,t){const s={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},i=this.jsPsych.pluginAPI.mergeSimulationData(s,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,i),i}simulate_data_only(e,t){const s=this.create_simulation_data(e,t);this.jsPsych.finishTrial(s)}simulate_visual(e,t,s){const i=this.create_simulation_data(e,t),a=this.jsPsych.getDisplayElement();this.trial(a,e),s(),i.rt!==null&&this.jsPsych.pluginAPI.pressKey(i.response,i.rt)}};ve.info=ts;let ue=ve;const Y=[[4,3,6],[3,8,1],[5,2,7],[6,1,4],[1,8,3],[3,2,4,9],[1,7,6,5],[3,5,7,1],[6,8,4,9],[5,2,6,4],[3,4,8,7,5],[8,1,5,3,6],[6,4,5,2,9],[3,1,7,2,4],[4,9,3,6,2],[5,6,8,1,9,4],[4,1,6,7,8,2],[2,5,9,6,3,1],[7,9,2,5,1,3],[8,6,1,4,3,9],[5,4,1,6,3,9,7],[7,1,9,3,4,6,2],[9,5,3,6,8,1,7],[2,6,8,1,4,9,5],[2,9,1,7,4,8,3],[1,4,7,2,8,3,6,9],[5,9,3,7,2,1,8,4],[7,6,9,3,1,5,4,8],[4,2,1,3,9,5,7,8],[9,3,1,4,2,6,5,7],[3,7,4,1,9,2,5,6,8],[7,5,2,8,6,4,1,9,3],[9,5,3,7,1,2,6,4,8],[6,3,7,4,2,5,1,9,8],[5,8,6,2,9,1,4,3,7]],ss={name:"corsi-blocks",parameters:{sequence:{type:m.INT,default:void 0,array:!0},blocks:{type:m.COMPLEX,array:!0,default:[{y:80,x:45},{y:94,x:80},{y:70,x:20},{y:60,x:70},{y:50,x:35},{y:40,x:6},{y:45,x:94},{y:25,x:60},{y:6,x:47}],nested:{x:{type:m.INT,default:void 0},y:{type:m.INT,default:void 0}}},block_size:{type:m.INT,default:12},display_width:{type:m.STRING,default:"400px"},display_height:{type:m.STRING,default:"400px"},prompt:{type:m.STRING,default:null},mode:{type:m.STRING,default:"display",options:["display","input"]},sequence_gap_duration:{type:m.INT,default:250},sequence_block_duration:{type:m.INT,default:1e3},pre_stim_duration:{type:m.INT,default:500},response_animation_duration:{type:m.INT,default:500},block_color:{type:m.STRING,default:"#555"},highlight_color:{type:m.STRING,default:"#ff0000"},correct_color:{type:m.STRING,default:"#00ff00"},incorrect_color:{type:m.STRING,default:"#ff0000"}}};class ce{constructor(e){this.jsPsych=e}trial(e,t){let i=`<style id="jspsych-corsi-css">
      #jspsych-corsi-stimulus { 
        position: relative; 
        width:${t.display_width}; 
        height:${t.display_height};
      }
      .jspsych-corsi-block { 
        background-color: ${t.block_color}; 
        position: absolute; 
        width: ${t.block_size}%; 
        height: ${t.block_size}%;
        transform: translate(-50%, -50%);
      }
      #jspsych-corsi-prompt { 
        position: absolute; 
        text-align: center; 
        width: ${t.display_width}; 
        top: 100%; 
      }
      #jspsych-corsi-prompt p { 
        font-size: 18px; 
      }
      ${t.mode=="input"?".jspsych-corsi-block { cursor: pointer; }":""}
    </style>`;i+='<div id="jspsych-corsi-stimulus">';for(let u=0;u<t.blocks.length;u++)i+=`<div class="jspsych-corsi-block" data-id="${u}" style="top:${t.blocks[u].y}%; left:${t.blocks[u].x}%;"></div>`;t.prompt!=null&&(i+=`<div id="jspsych-corsi-prompt"><p>${t.prompt}</p></div>`),i+="</div>",e.innerHTML=i;const a=performance.now(),l={sequence:t.sequence,response:[],rt:[],correct:null,mode:t.mode},o=()=>{e.innerHTML="",this.jsPsych.finishTrial(l)},n=function(u,c){const p=performance.now(),f=(g,v,b)=>{performance.now()-b>=v?g():window.requestAnimationFrame(()=>f(g,v,p))};window.requestAnimationFrame(()=>f(u,c,p))};if(t.mode=="display"){let u=0,c="pre-stim";const p=()=>{if(c=="pre-stim")n(p,t.pre_stim_duration),c="sequence";else if(c=="sequence"){const f=e.querySelector(`.jspsych-corsi-block[data-id="${t.sequence[u]}"]`);u<t.sequence.length&&(f.style.backgroundColor=t.highlight_color,n(p,t.sequence_block_duration),c="iti"),u==t.sequence.length&&o()}else if(c=="iti"){const f=e.querySelector(`.jspsych-corsi-block[data-id="${t.sequence[u]}"]`);f.style.backgroundColor=t.block_color,u++,n(p,t.sequence_gap_duration),c="sequence"}};window.requestAnimationFrame(p)}if(t.mode=="input"){const u=[{backgroundColor:t.block_color},{backgroundColor:t.correct_color,offset:.2},{backgroundColor:t.block_color}];t.block_color,t.incorrect_color,t.block_color;const c={duration:t.response_animation_duration,iterations:1},p=f=>{if(l.correct!==null)return;const g=Math.round(performance.now()-a);l.response.push(parseInt(f)),l.rt.push(g),console.log("id: ",parseInt(f)),console.log("sequence: ",t.sequence[l.response.length-1]);const v=JSON.stringify(l.response)===JSON.stringify(t.sequence);console.log("correct: ",v),console.log("response: ",l.response),console.log("sequence: ",t.sequence),e.querySelector(`.jspsych-corsi-block[data-id="${f}"]`).animate(u,c),l.response.length==t.sequence.length&&(v?l.correct=!0:l.correct=!1,setTimeout(o,t.response_animation_duration))};for(var h=e.querySelectorAll(".jspsych-corsi-block"),d=0;d<h.length;d++)h[d].addEventListener("click",f=>{p(f.target.getAttribute("data-id"))})}}}be(ce,"info",ss);const is={BASE_URL:"/corsi_fwd",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CORSI_ORDER:"fwd"},Ke="fwd";console.log(Ke);console.log(is);var $e;$e="Carefully watch the sequence of blocks that light up and then click on them in the SAME order.";function ns(r,e){const t=new Blob([r],{type:"text/plain"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}const ge=Yt({on_finish:function(){let r=ge.data.get(),e=r.csv();const t=r.first().values()[0].response.Q0;console.log("subj_id",t),ns(e,`sub-${t}_corsi_${Ke}.csv`)}}),rs=[{y:74,x:382},{y:47,x:71},{y:147,x:610},{y:192,x:148},{y:247,x:433},{y:290,x:660},{y:312,x:47},{y:463,x:203},{y:389,x:327}],Ce=rs.map(r=>({y:r.y*.25-10,x:r.x*.25-30}));var Re=-1;const os=function(){Re+=1;const r=Re;var e=ge.data.get().filter({trial_type:"corsi-blocks",mode:"input"});let t=Y[r].length;if(r===0)return!0;let i=e.filterCustom(function(o){return o.sequence.length==t}).select("correct").sum();return console.log("num_correct",i),!(i===4||e.filterCustom(function(o){return o.sequence.length==t-1}).select("correct").sum()===0&&r>4)},Z=[];Z.push({type:le,questions:[{prompt:"Subject ID: "}]});Z.push({type:ae,pages:[$e],button_label_next:"Continue",show_clickable_nav:!0});for(let r=0;r<Y.length;r++){let e={type:ce,sequence:Y[r].map(i=>i-1),sequence_gap_duration:400,sequence_block_duration:750,display_width:"500px",display_height:"500px",pre_stim_duration:1e3,blocks:Ce,block_size:20,mode:"display"};var Ne;console.log("adding fwd trial"),Ne={type:ce,sequence:Y[r].map(i=>i-1),display_width:"500px",display_height:"500px",blocks:Ce,block_size:20,mode:"input"};let t={type:ue,stimulus:'<div style="font-size:60px;">+</div>',choices:"NO_KEYS",trial_duration:1e3},s={timeline:[e,t,Ne,t],conditional_function:os};Z.push(s)}ge.run(Z);
